<!-- Side Panel START -->
<div class="side-panel" [ngClass]="{'side-panel-open' : sidePanelOpen}">
  <div class="side-panel-wrapper bg-white">
    <ul class="nav nav-tabs" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" href="#edit" role="tab" data-toggle="tab">
          <span *ngIf="!facility">Nouvel établissement</span>
          <span *ngIf="facility">Modifier établissement</span>
        </a>
      </li>
      <li class="panel-close">
        <button class="side-panel-toggle" (click)="close()">
          <i class="ti-close"></i>
        </button>
      </li>
    </ul>

    <div class="tab-content overflow-y-auto scrollable">
      <div id="edit" role="tabpanel" class="tab-pane fade in active">
        <div class="scrollable p-4">
          <form role="form" [formGroup]="facilityForm" (ngSubmit)="save()" autocomplete="off" novalidate>
            <div class="row">
              <div class="col-lg-12">
                <div class="form-group">
                  <label for="name">Nom</label>
                  <input type="text" id="name" class="form-control" formControlName="name"
                    [class.error]="submitted && facilityForm.get('name').status === 'INVALID'">
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-12">
                <div class="form-group">
                  <label for="code">Code</label>
                  <input type="text" id="code" class="form-control" formControlName="code"
                    [class.error]="submitted && facilityForm.get('code').status === 'INVALID'">
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-lg-12">
                <div class="form-group">
                  <label for="facility_type">Type</label>
                  <ng-select id="facility_type" [items]="types" bindLabel="name" bindValue="id"
                    formControlName="facility_type_id"
                    [class.error]="submitted && facilityForm.get('facility_type_id').status === 'INVALID'">
                    <ng-template ng-option-tmp let-item="item">
                      {{item.name}}
                    </ng-template>
                  </ng-select>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-lg">
                <div class="form-group">
                  <label>Propriété</label>
                  <div class="btn-group btn-group-toggle width-100" formControlName="is_private" ngbRadioGroup>
                    <label ngbButtonLabel class="btn-default" style="width: 50% !important;">
                      <input ngbButton type="radio" [value]="false" />
                      PUBLIC
                    </label>
                    <label ngbButtonLabel class="btn-default" style="width: 50% !important;">
                      <input ngbButton type="radio" [value]="true" />
                      PRIVÉ
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-lg-12">
                <div class="form-group">
                  <label for="facility_geography">ZAP / Commune</label>
                  <ng-select id="facility_geography" [items]="communes" bindLabel="name" bindValue="id"
                    formControlName="geography_id"
                    [class.error]="submitted && facilityForm.get('geography_id').status === 'INVALID'">
                    <ng-template ng-option-tmp let-item="item">
                      {{item.name}} <br>
                      <span class="text-muted">{{item.id}}</span>
                    </ng-template>
                  </ng-select>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-lg">
                <div class="form-group">
                  <label class="control-label">Activé</label>
                  <div class="toggle-checkbox toggle-info">
                    <input type="checkbox" formControlName="is_enabled" id="toggle-enabled" checked
                      [class.error]="submitted && facilityForm.get('is_enabled').status==='INVALID'">
                    <label for="toggle-enabled"></label>
                  </div>
                </div>
              </div>
            </div>

            <div class="row bg-white fixed-bottom">
              <div class="col-lg-12">
                <div class="px-4 pdd-vertical-20 border top">
                  <button type="submit" class="btn btn-info btn-block no-mrg-btm">
                    Enregistrer
                  </button>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Side Panel END -->